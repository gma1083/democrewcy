<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>Noomman Documentation</title>
    <meta name="description" content="Documentation for Noomman">
    <meta name="author" content="Cody Miro Jones">

    <!-- Mobile Specific Metas
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
  
    <!-- FONT
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link href="https://fonts.googleapis.com/css?family=Nanum+Gothic&display=swap" rel="stylesheet">
  
    <!-- CSS
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="stylesheet" href="../static/normalize.css">
    <link rel="stylesheet" href="../static/skeleton.css">
    <link rel="stylesheet" href="../static/custom.css">
</head>
<body>
    <div class="container">
        <section class="header">
            <h1>Noomman</h1>
            <p><strong>N</strong>odejs <strong>O</strong>bject-<strong>O</strong>riented <strong>M</strong>ongoDB <strong>Man</strong>ager</p>
        </section>
    </div>
    <div class="navbar">
        <div class="container">
            <ul class="navbar-list">
                <li class="navbar-item">
                    <a class="navbar-link" href="../index.html">Introduction</a>
                </li>
                <li class="navbar-item">
                    <a class="navbar-link" href="./gettingstarted.html">Getting Started</a>
                </li>
                <li class="navbar-item">
                    <a class="navbar-link" href="../reference.html">Reference</a>
                </li>
                <li class="navbar-item">
                    <a class="navbar-link" href="../documentation.html">Documentation</a>
                </li>
            </ul>
        </div>
    </div>

    <div class="container">
        <br>
        <h3>Class ClassModel</h3>

        <h4>Contents</h4>
        <a href="#methods"><strong>Methods</strong></a>
        <ul>
            <li><a href="#constructor">constructor()</a></li>
            <li><a href="#allSuperClasses">allSuperClasses()</a></li>
            <li><a href="#clear">clear()</a></li>
            <li><a href="#finalize">finalize()</a></li>
            <li><a href="#find">find()</a></li>
            <li><a href="#findById">findById()</a></li>
            <li><a href="#findOne">findOne()</a></li>
            <li><a href="#isSuperClass">isSuperClass()</a></li>
            <li><a href="#pureFind">pureFind()</a></li>
            <li><a href="#pureFindById">pureFindById()</a></li>
            <li><a href="#pureFindOne">pureFindOne()</a></li>
        </ul>
        <a href="#objects"><strong>Objects</strong></a>
        <ul>
            <li><a href="#schema">schema</a></li>
        </ul>
    </div>


    <div class="container" id="methods">
        <div id="ClassModel-methods">

            <h4>Methods</h4>
            
            <div class="docs-section" id="constructor">
                <h5>constructor(schema)</h5>
                <div>
                    <strong>Description</strong>
                    <p>
                            
                    </p>
                    <strong>Parameters</strong>
                    <table>
                        <thead>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Description</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>schema</td>
                                <td><a href="#schema">Object&lt;schema&gt;</a></td>
                                <td>A schema describing the properties of this ClassModel.</td>
                            </tr>
                        </tbody>
                    </table>
                    <strong>Returns</strong>
                    <p>ClassModel - The ClassModel created according to the given schema.</p>
                    <strong>Throws</strong>
                    <table>
                        <thead>
                            <th>Error Type</th>
                            <th>Cause</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property className is omitted.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property attributes is provided and is not an Array.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property relationships is provided and is not an Array.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property superClasses is provided and is not an Array.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property superClasses is provided and is an empty Array.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property useSuperClassCollection is true and superClasses is omitted or contains more than one ClassModel.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property auditable is provided and is not a Boolean.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property indices is provided and is not an Array.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property validations is provided and is not an Array.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property createControl of property crudControls is not a Function.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property readControl of property crudControls is not a Function.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property updateControl of property crudControls is not a Function.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property deleteControl of property crudControls is not a Function.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property sensitiveControl of property crudControls is not a Function.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If ClassModel has a sensitive attribute but no sensitiveControl method.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If ClassModel has a sensitiveControl method but no sensitive attribute.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property staticMethods is provided but is not an Object.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property staticMethods is provided, and any of its properties is not a Function.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property staticMethods is provided, and any of its properties has the same name as a built in noomman method on class ClassModel.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property nonStaticMethods is provided but is not an Object.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property nonStaticMethods is provided, and any of its properties is not a Function.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property nonStaticMethods is provided, and any of its properties has the same name as a built in noomman method on class Instance.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If properties useSuperClassCollection and abstract are both true.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property superClasses is provided, and any super ClassModel has an attribute with the same name as a attribute defined in the attributes property of the schema.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property superClasses is provided, and any super ClassModel has an relationship with the same name as a relationship defined in the relationships property of the schema.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If any ClassModel in the superClasses property has useSuperClassModel set to true.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If property auditable is false, but a ClassModel in the superClasses property has auditable set to true.</td>
                            </tr>
                            <tr>
                                <td>NoommanConstructorError</td>
                                <td>If properties abstract and useSuperClassCollection are both true.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="docs-section" id="allSuperClasses">
                <h5>allSuperClasses()</h5>
                <div>
                    <strong>Description</strong>
                    <p>
                            Finds all the ClassModels which are a parent ClassModel to this ClassModel, 
                            all the way up the inheritance tree.
                    </p>
                    <strong>Returns</strong>
                    <p>
                        Array&lt;ClassModel&gt; - An array containing all the ClassModels that are a super ClassModel
                        to this ClassModel.
                    </p>
                </div>
            </div>
            
            <div class="docs-section" id="clear">
                <h5>clear()</h5>
                <div>
                    <strong>Description</strong>
                    <p>
                        Deletes every document in the collection for this ClassModel. 
                        This is for testing purposes only, never run in production.
                    </p>
                    <strong>Returns</strong>
                    <p>
                        Promise&lt;undefined&gt; - A promise which resolves to undefined if no Errors are thrown.
                    </p>
                </div>
            </div>
            
            <div class="docs-section" id="finalize">
                <h5>finalize()</h5>
                <div>
                    <strong>Description</strong>
                    <p>
                            For each defined ClassModel, runs post-constructor validations and applies indices. 
                            Run only after ALL class models have been created. 
                    </p>
                    <strong>Returns</strong>
                    <p>Promise&lt;undefined&gt; - A Promise which resolves to undefined if successful.</p>
                    <strong>Throws</strong>
                    <table>
                        <thead>
                            <th>Error Type</th>
                            <th>Cause</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>NoommanClassModelError</td>
                                <td>If no ClassModel exists with the value of a relationship's toClass property.</td>
                            </tr>
                            <tr>
                                <td>NoommanClassModelError</td>
                                <td>
                                    If a two-way relationship is defined and the related ClassModel does not have
                                    a relationship a name matching the mirrorRelationship property of the relationship.
                                </td>
                            </tr>
                            <tr>
                                <td>NoommanClassModelError</td>
                                <td>
                                    If a two-way relationship is defined but the mirrorRelationship properties of 
                                    the two relationships are not the name of the other relationship.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="docs-section" id="find">
                <h5>find(queryFilter, readControlMethodParameters, sensitiveControlMethodParameters)</h5>
                <div>
                    <strong>Description</strong>
                    <p>
                        Finds Instances of this ClassModel using the given query filter in the database. 
                        If called on a super-ClassModel, will recursively check this ClassModel's collection, and then it's sub-ClassModels' collections.
                        This method respects readControl and sensitiveControl methods. If this ClassModel is read controlled, Instances found
                        during query will be filtered down to those which pass the readControl method(s) for this ClassModel. If this ClassModel
                        is sensitive controlled, all Instances which do not pass the sensitiveControl method(s) for this ClassModel will be
                        stripped of any sensitive attributes.
                    </p>
                    <strong>Parameters</strong>
                    <table>
                        <thead>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Description</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>queryFilter</td>
                                <td>Object</td>
                                <td>A mongo query object (required).</td>
                            </tr>
                            <tr>
                                <td>readControlMethodParameters</td>
                                <td>Object</td>
                                <td>
                                    An object containing parameters that will be passed to the readControl method(s)
                                    for this ClassModel.
                                </td>
                            </tr>
                            <tr>
                                <td>sensitiveControlMethodParameters</td>
                                <td>Object</td>
                                <td>
                                    An object containing parameters that will be passed to the sensitiveControl
                                    method(s) for this ClassModel.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <strong>Returns</strong>
                    <p>
                        Promise&lt;InstanceSet&gt; - An InstanceSet of this ClassModel containing all instances of this ClassModel or its children
                        which match the given query and pass the readControl methods if applicable.
                    </p>
                </div>
            </div>
            
            <div class="docs-section" id="findById">
                <h5>findById(queryFilter, readControlMethodParameters, sensitiveControlMethodParameters)</h5>
                <div>
                    <strong>Description</strong>
                    <p>
                        Finds a single instance of this ClassModel with the given id.
                        If called on a superclass, will recursively check this ClassModel's collection, and then it's sub-ClassModels collections.
                        This method respects readControl and sensitiveControl methods. If this ClassModel is read controlled, the Instance found
                        during query will not be returned if it does not pass the readControl method(s) for this ClassModel. If this ClassModel
                        is sensitive controlled, an instance which does not pass the sensitiveControl method(s) for this ClassModel will be
                        stripped of any sensitive attributes.
                    </p>
                    <strong>Parameters</strong>
                    <table>
                        <thead>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Description</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>id</td>
                                <td>ObjectId</td>
                                <td>A mongo ObjectId of the Instance you which to find.</td>
                            </tr>
                            <tr>
                                <td>readControlMethodParameters</td>
                                <td>Object</td>
                                <td>
                                    An object containing parameters that will be passed to the readControl method(s)
                                    for this ClassModel.
                                </td>
                            </tr>
                            <tr>
                                <td>sensitiveControlMethodParameters</td>
                                <td>Object</td>
                                <td>
                                    An object containing parameters that will be passed to the sensitiveControl
                                    method(s) for this ClassModel.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <strong>Returns</strong>
                    <p>
                        Promise&lt;Instance&gt; - The first Instance of this ClassModel or its children
                        which has the given id and passes the readControl methods if applicable. Returns null if no Instance with the given id is 
                        found, or if matching instance does not pass readControl method (if applicable).
                    </p>
                </div>
            </div>
            
            <div class="docs-section" id="findOne">
                <h5>findOne(queryFilter, readControlMethodParameters, sensitiveControlMethodParameters)</h5>
                <div>
                    <strong>Description</strong>
                    <p>
                        Finds a single Instance of this ClassModel using the given query filter in the database. 
                        If called on a super-ClassModel, will recursively check this ClassModel's collection, and then it's sub-ClassModels collections.
                        This method respects readControl and sensitiveControl methods. If this ClassModel is read controlled, the Instance found
                        during query will not be returned if it does not pass the readControl method(s) for this ClassModel. If this ClassModel
                        is sensitive controlled, an Instance which does not pass the sensitiveControl method(s) for this ClassModel will be 
                        stripped of any sensitive attributes.
                    </p>
                    <strong>Parameters</strong>
                    <table>
                        <thead>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Description</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>queryFilter</td>
                                <td>Object</td>
                                <td>A mongo query object (required).</td>
                            </tr>
                            <tr>
                                <td>readControlMethodParameters</td>
                                <td>Object</td>
                                <td>
                                    An object containing parameters that will be passed to the readControl method(s)
                                    for this ClassModel.
                                </td>
                            </tr>
                            <tr>
                                <td>sensitiveControlMethodParameters</td>
                                <td>Object</td>
                                <td>
                                    An object containing parameters that will be passed to the sensitiveControlMethodParameters
                                    method(s) for this ClassModel.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <strong>Returns</strong>
                    <p>
                        Promise&lt;Instance&gt; - The first Instance of this ClassModel or its children which matches the given query and passes the
                        readControl methods if applicable. Returns null if no Instance matches query or if matching Instance does not pass 
                        readControl method if applicable.
                    </p>
                </div>
            </div>
            
            <div class="docs-section" id="isSuperClass">
                <h5>isSuperClass()</h5>
                <div>
                    <strong>Description</strong>
                    <p>
                        Use to determine if this ClassModel is a super ClassModel. 
                    </p>
                    <strong>Returns</strong>
                    <p>Boolean - True if this ClassModel has any sub ClassModels, false otherwise.</p>
                </div>
            </div>
            
            <div class="docs-section" id="pureFind">
                <h5>pureFind(queryFilter)</h5>
                <div>
                    <strong>Description</strong>
                    <p>
                        Finds instances of this ClassModel using the given query filter in the database.
                        If called on a super-ClassModel, will recursively check this ClassModel's collection, and then it's sub-ClassModels collections.
                        This method DOES NOT do any readControl or sensitiveControl filtering. 
                    </p>
                    <strong>Parameters</strong>
                    <table>
                        <thead>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Description</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>queryFilter</td>
                                <td>Object</td>
                                <td>A mongo query object (required).</td>
                            </tr>
                        </tbody>
                    </table>
                    <strong>Returns</strong>
                    <p>
                        Promise&lt;InstanceSet&gt; - An InstanceSet of this ClassModel containing all instances of this ClassModel or its children
                            which match the given query.
                    </p>
                    <strong>Throws</strong>
                    <table>
                        <thead>
                            <th>Error Type</th>
                            <th>Cause</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>NoommanClassModelError</td>
                                <td>
                                    If this ClassModel is abstract and has no sub-ClassModels.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="docs-section" id="pureFindById">
                <h5>pureFindById(id)</h5>
                <div>
                    <strong>Description</strong>
                    <p>
                        Finds a single instance of this ClassModel with the given id.
                        If called on a superclass, will recursively check this ClassModel's collection, and then it's sub-ClassModels collections.
                        This method does not respect readControl and sensitiveControl methods. 
                    </p>
                    <strong>Parameters</strong>
                    <table>
                        <thead>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Description</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>id</td>
                                <td>ObjectId</td>
                                <td>A mongo ObjectId of the Instance you which to find.</td>
                            </tr>
                        </tbody>
                    </table>
                    <strong>Returns</strong>
                    <p>
                        Promise&lt;Instance&gt; - The Instance of this ClassModel or its children with the given id.
                    </p>
                </div>
            </div>
            
            <div class="docs-section" id="pureFindOne">
                <h5>pureFindOne(queryFilter)</h5>
                <div>
                    <strong>Description</strong>
                    <p>
                        Finds a single instance of this ClassModel using the given query filter in the database. 
                        If called on a superclass, will recursively check this ClassModel's collection, and then it's sub-ClassModels collections.
                        This method does not respect readControl and sensitiveControl methods. 
                    </p>
                    <strong>Parameters</strong>
                    <table>
                        <thead>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Description</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>queryFilter</td>
                                <td>Object</td>
                                <td>A mongo query object (required).</td>
                            </tr>
                        </tbody>
                    </table>
                    <strong>Returns</strong>
                    <p>
                        Promise&lt;Instance&gt; - The first Instance of this ClassModel or its children which matches the given query.
                    </p>
                    <strong>Throws</strong>
                    <table>
                        <thead>
                            <th>Error Type</th>
                            <th>Cause</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>NoommanClassModelError</td>
                                <td>
                                    If this ClassModel is abstract and has no sub-ClassModels.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
        </div>
    </div>


    <div class="container" id="objects">
        <h4>Object Definitions</h4>

        <div class="docs-section" id="schema">
            <h4>schema</h4>
            <p>
                Schema object passed to ClassModel.constructor(). This defines the name, 
                attributes, relationships, and other properties of a ClassModel.
            </p>
            <strong>Shape</strong>
            <pre>
                <code>
{
    className: String (required),
    superClasses: [ ClassModel ],
    useSuperClassCollection: Boolean,
    abstract: Boolean,
    auditable: Boolean,
    attributes: [
        {
            name: String (required), 
            type: String (required), 
            list: Boolean,
            required: Boolean,
            unique: Boolean,
            sensitive: Boolean,
            mutex: String,
            requiredGroup: String,
        },
    ],
    relationships: [
        {
            name: String (required),
            toClass: String (required),
            singular: Boolean (required),
            required: Boolean,
            owns: Boolean,
            mirrorRelationship: String,
            mutex: String,
            requiredGroup: String,
        }
    ],
    crudFunctions: {
        createControl: Function,
        readControl: Function,
        updateControl: Function,
        deleteControl: Function,
        sensitiveControl: Function,
    },
    validations: [ Function ],
    indices: [ fieldOrSpec ], 
    staticMethods: {
        String: Function,
    },
    nonStaticMethods: {
        String: Function,
    },
}
                </code>
            </pre>
        </div>
    </div>
</body>
</html>